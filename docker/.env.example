# ============================================================================
# CONFIGURAÇÃO DO MVP RAG LOCAL
# ============================================================================
#
# Instruções:
# 1. Copie este arquivo para .env
# 2. Preencha os valores conforme seu ambiente
# 3. NUNCA commite o arquivo .env (contém secrets!)
#

# ============================================================================
# POSTGRESQL (Banco de Dados Existente)
# ============================================================================

# Host do PostgreSQL
# - Docker: postgres (nome do serviço)
# - Local: localhost ou IP do servidor
POSTGRES_HOST=postgres

POSTGRES_PORT=5432

# Nome do banco de dados (seus dados existentes)
POSTGRES_DB=video_assets

# Credenciais
POSTGRES_USER=curator
POSTGRES_PASSWORD=ALTERE_AQUI_SENHA_SEGURA

# ============================================================================
# QDRANT (Vector Database)
# ============================================================================

# Host do Qdrant
# - Docker: qdrant (nome do serviço)
# - Local: localhost
QDRANT_HOST=qdrant

QDRANT_PORT=6333

# API Key (deixe vazio para local sem autenticação)
QDRANT_API_KEY=

# Nome da collection
QDRANT_COLLECTION_NAME=video_clips

# Tamanho do vetor (768 para CLIP ViT-L/14, 512 para ViT-B/32)
QDRANT_VECTOR_SIZE=768

# ============================================================================
# ANTHROPIC (CLAUDE) - OBRIGATÓRIO
# ============================================================================

# API Key do Claude (obtenha em: https://console.anthropic.com)
ANTHROPIC_API_KEY=sk-ant-api03-COLE_SUA_KEY_AQUI

# Modelo a usar
CLAUDE_MODEL=claude-3-5-sonnet-20241022

# Parâmetros
CLAUDE_MAX_TOKENS=2048
CLAUDE_TEMPERATURE=0.3

# ============================================================================
# CLIP (Embeddings Multimodais)
# ============================================================================

# Modelo CLIP a usar
# Opções:
# - openai/clip-vit-large-patch14  (768-dim, melhor qualidade, mais lento)
# - openai/clip-vit-base-patch32   (512-dim, mais rápido)
CLIP_MODEL_NAME=openai/clip-vit-large-patch14

# Dispositivo
# - auto: detecta automaticamente (GPU se disponível)
# - cuda: força GPU
# - cpu: força CPU
CLIP_DEVICE=auto

# ============================================================================
# PATHS (Ajustar para seu ambiente)
# ============================================================================

# Onde estão armazenados seus vídeos
# Ajuste para o caminho real no seu sistema
VIDEO_STORAGE_PATH=/data/videos

# Onde cachear frames extraídos
FRAMES_CACHE_PATH=/data/frames_cache

# ============================================================================
# PROCESSAMENTO
# ============================================================================

# Número máximo de workers para processamento paralelo
MAX_WORKERS=4

# Tamanho do batch para processar em lote
BATCH_SIZE=10

# Quantos frames extrair por clip (mais = melhor qualidade, mais lento)
MAX_FRAMES_PER_CLIP=8

# Threshold para detecção de mudança de cena (PySceneDetect)
# Valores típicos: 20-30 (menor = mais sensível)
SCENE_DETECTION_THRESHOLD=27.0

# ============================================================================
# REDIS (Cache e Fila - Opcional)
# ============================================================================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ============================================================================
# CURADORIA (RAG)
# ============================================================================

# Habilitar expansão de query com LLM?
ENABLE_QUERY_EXPANSION=true

# Limite de resultados na busca vetorial
VECTOR_SEARCH_LIMIT=100

# Limite de clips na seleção final
FINAL_SELECTION_LIMIT=30

# MMR Lambda (0.0 = só diversidade, 1.0 = só relevância)
MMR_LAMBDA=0.7

# Habilitar reranking com LLM?
ENABLE_LLM_RERANKING=true

# Top K para reranking
RERANK_TOP_K=50

# ============================================================================
# LOGGING & MONITORING
# ============================================================================

# Nível de log: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Formato: rich, json, simple
LOG_FORMAT=rich

# Habilitar métricas Prometheus?
ENABLE_METRICS=false
METRICS_PORT=9090

# ============================================================================
# DESENVOLVIMENTO
# ============================================================================

# Ambiente: local, staging, production
ENVIRONMENT=local

# Debug mode
DEBUG=false

# ============================================================================
# EXEMPLO DE .env COMPLETO VÁLIDO
# ============================================================================
#
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=video_assets
# POSTGRES_USER=curator
# POSTGRES_PASSWORD=minha_senha_123
#
# QDRANT_HOST=localhost
# QDRANT_PORT=6333
#
# ANTHROPIC_API_KEY=sk-ant-api03-abc123...
#
# VIDEO_STORAGE_PATH=/mnt/videos
# FRAMES_CACHE_PATH=/tmp/frames_cache
#
# MAX_WORKERS=8
# MAX_FRAMES_PER_CLIP=8
#
